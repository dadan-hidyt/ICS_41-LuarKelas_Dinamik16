var options={classname:"toast",transition:"pinItDown",insertBefore:!0,duration:3e3,enableSounds:!0,autoClose:!0,progressBar:!0,sounds:{info:"assets/vendor/Toasty.js/dist/sounds/info/1.mp3",success:"assets/vendor/Toasty.js/dist/sounds/success/1.mp3",warning:"assets/vendor/Toasty.js/dist/sounds/warning/1.mp3",error:"assets/vendor/Toasty.js/dist/sounds/error/1.mp3"},onShow:function(e){},onHide:function(e){},prependTo:document.body.childNodes[0]},toast=new Toasty(options);function $(e){return document.querySelector(e)}var ajax=new XMLHttpRequest;let form_login=$("#form-login"),form_register=$("#form-register");function login(e){e.innerHTML="loading..";var s=form_login.querySelector("#login_username"),a=form_login.querySelector("#login_password");if(""==s.value&&""==a.value)toast.warning("Username dan password tidak boleh kosong"),s.classList.add("_danger"),a.classList.add("_danger"),e.innerHTML="Masuk";else if(""==s.value&&""!=a.value)toast.warning("Username tidak boleh kosong"),s.classList.add("_danger"),a.classList.remove("_danger"),e.innerHTML="Masuk";else if(""==a.value&&""!=s.value)toast.warning("password tidak boleh kosong"),a.classList.add("_danger"),s.classList.remove("_danger"),e.innerHTML="Masuk";else{a.classList.remove("_danger"),s.classList.remove("_danger");let r=form_login.action,n=form_login.method.toUpperCase(),o=new FormData;o.append("username",s.value),o.append("password",a.value),ajax.open(n,r),ajax.responseType="json",ajax.send(o),ajax.onload=function(s){let a=s.target.response;if(null!==a)if(0==a.error){toast.success("Selamat datang kembali,, Anda berhasil login"),e.innerHTML="Login berhasil...";var r=a.link;setTimeout(function(){window.location.href=`${r}`},2e3)}else toast.error(a.message),e.innerHTML="Masuk"},ajax.onerror=function(e){0==e.target.status&&(alert("error Periksa koneksi internet anda"),e.innerHTML="Masuk")}}}function daftar(e){let s=form_register.querySelector("#reg_nama_lengkap"),a=form_register.querySelector("#reg_username"),r=form_register.querySelector("#reg_password"),n=form_register.querySelector("#reg_password2");if(""==s.value&&""==a.value&&""==r.value&&""==n.value)s.classList.add("_danger"),a.classList.add("_danger"),r.classList.add("_danger"),n.classList.add("_danger");else if(""==a.value)a.classList.add("_danger");else if(""==r.value)r.classList.add("_danger");else if(""==n.value)n.classList.add("_danger");else if(s.classList.remove("_danger"),a.classList.remove("_danger"),r.classList.remove("_danger"),n.classList.remove("_danger"),n.value!=r.value)toast.warning("Kata sandi tidak cocok dengan yang sebelumnya!"),r.classList.add("_danger"),n.classList.add("_danger");else{r.classList.remove("_danger"),n.classList.remove("_danger");let o=form_register.action,t=form_register.method.toUpperCase(),i=new FormData;i.append("fullname",s.value),i.append("username",a.value),i.append("password",r.value),i.append("password2",n.value),ajax.open(t,o),ajax.responseType="json",ajax.onprogress=function(){e.innerHTML="Plase Wait..."},ajax.send(i),ajax.onload=function(s){let a=s.target.response;console.log(a.error),0==a.error?(toast.success(a.message),e.innerHTML=a.message,setTimeout(function(){window.location.href=a.link},3e3)):1==a.error&&(e.innerHTML="Daftar",toast.warning(a.message))}}}function tampilkanregister(){document.title="Register",document.querySelector(".register").style.left="0",document.querySelector(".container-auth").style.height="520px",document.querySelector(".login").style.left="-2000px"}function tampilkanlogin(){document.title="login",document.querySelector(".register").style.left="820px",document.querySelector(".login").style.left="0",document.querySelector(".container-auth").style.height="400px"}